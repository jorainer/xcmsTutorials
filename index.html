<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Exploring and Analyzing LC-MS data with Spectra and xcms • xcmsTutorials</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Exploring and Analyzing LC-MS data with Spectra and xcms">
<meta name="description" content="This resource contains examples and tutorials for the analysis of LC-MS data using the *MsExperiment*, *Spectra* and *xcms* packages. Various examples show data handling, representation, visualization and analysis of LC-MS data with these packages. A special emphasis is given on the definition of various data set-specific parameters for analysis algorithms of the *xcms* package.">
<meta property="og:description" content="This resource contains examples and tutorials for the analysis of LC-MS data using the *MsExperiment*, *Spectra* and *xcms* packages. Various examples show data handling, representation, visualization and analysis of LC-MS data with these packages. A special emphasis is given on the definition of various data set-specific parameters for analysis algorithms of the *xcms* package.">
<meta property="og:image" content="https://jorainer.github.io/xcmsTutorials/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">xcmsTutorials</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/xcms-preprocessing.html">Exploring and Analyzing LC-MS Data with Spectra and xcms</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jorainer/xcmsTutorials/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="exploring-and-analyzing-lc-ms-data-with-spectra-and-xcms">Exploring and analyzing LC-MS data with <em>Spectra</em> and <em>xcms</em>
<a class="anchor" aria-label="anchor" href="#exploring-and-analyzing-lc-ms-data-with-spectra-and-xcms"></a>
</h1>
</div>
<p><a href="https://creativecommons.org/licenses/by-nc/4.0/" class="external-link"><img src="https://img.shields.io/badge/License-CC%20BY--NC%204.0-lightgrey.svg" alt="License: CC BY-NC 4.0"></a> <img src="https://img.shields.io/docker/pulls/jorainer/xcms_tutorials" alt="docker pulls"><a href="https://hub.docker.com/repository/docker/jorainer/xcms_tutorials" class="external-link"><img src="https://img.shields.io/docker/v/jorainer/xcms_tutorials?label=docker%20image" alt="Docker Image Version (latest by date)"></a> <a href="https://zenodo.org/doi/10.5281/zenodo.11185520" class="external-link"><img src="https://zenodo.org/badge/645255717.svg" alt="DOI"></a></p>
<p><img src="reference/figures/xcms.png" alt="xcms"><img src="reference/figures/MsExperiment.png" alt="MsExperiment"><img src="reference/figures/Spectra-rainbow.png" alt="Spectra"><img src="reference/figures/MetaboCoreUtils.png" alt="MetaboCoreUtils"><img src="reference/figures/MsCoreUtils.png" alt="MsCoreUtils"></p>
<p>This workshop provides an overview of recent developments in Bioconductor to work with mass spectrometry data (<a href="https://github.com/RforMassSpectrometry/MsExperiment" class="external-link">MsExperiment</a>, <a href="https://github.com/RforMassSpectrometry/Spectra" class="external-link">Spectra</a>) and specifically LC-MS data (<a href="https://github.com/sneumann/xcms" class="external-link">xcms</a>) and walks through the preprocessing of a small data set emphasizing on selection of data-dependent settings for the individual preprocessing steps.</p>
<p>Covered topics are:</p>
<ul>
<li><p>Data import and representation.</p></li>
<li><p>Accessing, subsetting and visualizing data.</p></li>
<li><p>Centroiding of profile mode MS data.</p></li>
<li><p>Chromatographic peak detection.</p></li>
<li><p>Empirically determine appropriate settings for the analyzed data set.</p></li>
<li><p>Evaluation of identified peaks.</p></li>
<li><p>Alignment (retention time correction).</p></li>
<li><p>Correspondence (grouping of chromatographic peaks across samples).</p></li>
</ul>
<p>The full R code of all examples along with comprehensive descriptions is provided in the <a href="./vignettes/xcms-preprocessing.Rmd">xcms-preprocessing.Rmd</a> file. This file can be opened with e.g. RStudio which allows execution of the individual R commands (see section below for additionally required R packages). The R command <code>rmarkdown::render("xcms-preprocessing.Rmd")</code> would generate the html file <a href="https://jorainer.github.io/xcmsTutorials/xcms-preprocessing.html">xcms-preprocessing.html</a>.</p>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>This workflow (and future versions) are deposited at <a href="https://zenodo.org" class="external-link">Zenodo</a>. To cite this version of the tutorial:</p>
<p>Johannes Rainer and Philippine Louail. xcmsTutorials version 1.1.0: Exploring and analyzing LC-MS data with Spectra and xcms. Zenodo, May 13, 2024. <a href="https://doi.org/10.5281/zenodo.11185521" class="external-link uri">https://doi.org/10.5281/zenodo.11185521</a> .</p>
<p>Louail P, Brunius C, Garcia-Aloy M, Kumler W, Storz N, Stanstrup J, Treutler H, Vangeenderhuysen P, Witting M, Neumann S, Rainer J. xcms in Peak Form: Now Anchoring a Complete Metabolomics Data Preprocessing and Analysis Software Ecosystem. Anal Chem. 2025 Dec 8. doi: <a href="https://doi.org/10.1021/acs.analchem.5c04338" class="external-link">10.1021/acs.analchem.5c04338</a>. Epub ahead of print. PMID: 41359826.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The workshop files along with an R runtime environment including all required packages and the RStudio (Posit) editor are all bundled in a <em>docker</em> container. After installation, this docker container can be run on the computer and the code and examples from the workshop can be evaluated within this environment (without the need to install any additional packages or files).</p>
<p>This version of the workshop uses packages from <strong>Bioconductor release 3.22</strong> (October 2025) and hence bases on Bioconductor’s docker container for that release (<em>RELEASE_3_22</em>). The required steps for installation are:</p>
<ul>
<li>If you don’t already have, install <a href="https://www.docker.com/" class="external-link">docker</a>. Find installation information <a href="https://docs.docker.com/desktop/" class="external-link">here</a>.</li>
<li>Get the <a href="https://hub.docker.com/r/jorainer/xcms_tutorials" class="external-link">docker image</a> of this tutorial e.g. from the command line with <code>docker pull jorainer/xcms_tutorials:RELEASE_3_22</code>.</li>
<li>Start the docker container, either through the Docker Desktop, or on the command line with</li>
</ul>
<pre><code>  docker run \
      -e PASSWORD=bioc \
      -p 8787:8787 \
      jorainer/xcms_tutorials:RELEASE_3_22</code></pre>
<ul>
<li>Enter <code>http://localhost:8787</code> in a web browser and log in with username <code>rstudio</code> and password <code>bioc</code>.</li>
<li>In the RStudio server version: open any of the R-markdown (<em>.Rmd</em>) files in the <em>vignettes</em> folder and evaluate the R code blocks in that document.</li>
</ul>
<p>For manual installation, an R version &gt;= 4.5.0 is required as well as recent versions of the packages <code>MsExperiment</code>, <code>Spectra</code> and in particular the <code>xcms</code>. These can be installed using the code below:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"BiocManager"</span><span class="op">)</span></span>
<span><span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="https://bioconductor.github.io/BiocManager/reference/install.html" class="external-link">install</a></span><span class="op">(</span><span class="st">"jorainer/xcmsTutorials"</span>,</span>
<span>    dependencies <span class="op">=</span> <span class="cn">TRUE</span>, ask <span class="op">=</span> <span class="cn">FALSE</span>, update <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="contribution">Contribution<a class="anchor" aria-label="anchor" href="#contribution"></a>
</h2>
<p>For contributions, see the <a href="https://rformassspectrometry.github.io/RforMassSpectrometry/articles/RforMassSpectrometry.html#contributions" class="external-link">RforMassSpectrometry contributions guideline</a>.</p>
</div>
<div class="section level2">
<h2 id="code-of-conduct">Code of Conduct<a class="anchor" aria-label="anchor" href="#code-of-conduct"></a>
</h2>
<p>See the <a href="https://rformassspectrometry.github.io/RforMassSpectrometry/articles/RforMassSpectrometry.html#code-of-conduct" class="external-link">RforMassSpectrometry Code of Conduct</a>.</p>
</div>
<div class="section level2">
<h2 id="additional-documentation-resources-and-tutorials">Additional documentation resources and tutorials<a class="anchor" aria-label="anchor" href="#additional-documentation-resources-and-tutorials"></a>
</h2>
<ul>
<li>Tutorial with additional examples and explanations for MS2-based annotations: <a href="https://jorainer.github.io/SpectraTutorials/" class="external-link uri">https://jorainer.github.io/SpectraTutorials/</a>
</li>
<li>Repository of the <code>MsCoreUtils</code> package: <a href="https://rformassspectrometry.github.io/MsCoreUtils/" class="external-link uri">https://rformassspectrometry.github.io/MsCoreUtils/</a>
</li>
<li>Repository of the <code>MetaboCoreUtils</code> package: <a href="https://rformassspectrometry.github.io/MetaboCoreUtils/" class="external-link uri">https://rformassspectrometry.github.io/MetaboCoreUtils/</a>
</li>
<li>Repository of the <code>Spectra</code> package: <a href="https://rformassspectrometry.github.io/Spectra/" class="external-link uri">https://rformassspectrometry.github.io/Spectra/</a>
</li>
<li>Repository of the <code>MetaboAnnotation</code> package: <a href="https://rformassspectrometry.github.io/MetaboAnnotation/" class="external-link uri">https://rformassspectrometry.github.io/MetaboAnnotation/</a>
</li>
<li>Repository of the <code>CompoundDb</code> package: <a href="https://rformassspectrometry.github.io/CompoundDb/" class="external-link uri">https://rformassspectrometry.github.io/CompoundDb/</a>
</li>
</ul>
</div>
</div>
<div class="section level1">
<h1 id="acknowledgments">Acknowledgments<a class="anchor" aria-label="anchor" href="#acknowledgments"></a>
</h1>
<p>Thank you to <a href="https://github.com/philouail" class="external-link">Philippine Louail</a> for fixing typos and suggesting improvements.</p>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/jorainer/xcmsTutorials/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/jorainer/xcmsTutorials/issues/new" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/Artistic-2.0" class="external-link">Artistic-2.0</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing xcmsTutorials</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Johannes Rainer <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-6977-7147" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Johannes Rainer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
